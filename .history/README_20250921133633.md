# MCP Architecture: AI Hotel Finder Agent

A demonstration of a robust and scalable architecture for implementing the Model Context Protocol (MCP) in agentic AI workflows, showcased through an intelligent hotel-finding application.

## Overview

This repository demonstrates how to build scalable, agentic AI systems using the **Model Context Protocol (MCP)**. It is structured to guide developers from the basic principles of MCP architecture to a fully functional, real-world application.

The project starts by outlining a generic, reusable architecture and then applies it to build an **Advanced Hotel Finder Agent**. This approach provides a clear blueprint that you can adapt for your own projects, showing how to connect Large Language Models to live, external tools in a standardized and maintainable way.

## Project Structure: From Concept to Application

To provide a clear learning path, this project is structured in two conceptual layers:

1.  **Foundational MCP Architecture:** The initial part of this README describes a generic and robust client-server architecture for MCP. This includes the roles of the **Host**, **Client**, and **Server**, and how they communicate. This serves as the theoretical blueprint for any MCP-based system.

2.  **Practical Application (Hotel Finder):** We then scale up this architecture with a concrete example—an intelligent hotel finder built with Streamlit and the `agno` agent framework. This application demonstrates:
    *   A **Streamlit** app acting as the **MCP Host**.
    *   A **Perplexity-powered AI agent** acting as the **MCP Client**.
    *   An **MCP Server** that connects to live Airbnb data, providing a real-world tool for the agent.

This structure allows you to first understand the core concepts and then see them in action, providing a better perspective on how to build and scale your own agentic AI applications.

## Features

-   **MCP Host:** A Streamlit application serves as the user interface and orchestrator for the agent.
-   **MCP Client:** Managed by the `agno` library, it handles the discovery of and communication with MCP servers.
-   **MCP Server:** The project uses the `@openbnb/mcp-server-airbnb` Node.js package, which acts as an MCP server providing real-time access to Airbnb's data.
-   **Standardized Communication:** Leverages JSON-RPC 2.0 for reliable data exchange between the agent and the Airbnb tool.
-   **Swappable AI Models:** The architecture allows for easy replacement of the LLM provider (e.g., from Perplexity to OpenAI, Anthropic, or others).
-   **Modularity:** The system can be easily extended by adding new MCP servers for different tools or services (e.g., weather, flight booking, local databases).

---
# MCP Architecture: AI Hotel Finder Agent

A demonstration of a robust and scalable architecture for implementing the Model Context Protocol (MCP) in agentic AI workflows, showcased through an intelligent hotel-finding application.

## Overview

This repository demonstrates how to build scalable, agentic AI systems using the **Model Context Protocol (MCP)**. It is structured to guide developers from the basic principles of MCP architecture to a fully functional, real-world application.

The project starts by outlining a generic, reusable architecture and then applies it to build an **Advanced Hotel Finder Agent**. This approach provides a clear blueprint that you can adapt for your own projects, showing how to connect Large Language Models to live, external tools in a standardized and maintainable way.

## Project Structure: From Concept to Application

To provide a clear learning path, this project is structured in two conceptual layers:

1.  **Foundational MCP Architecture:** The initial part of this README describes a generic and robust client-server architecture for MCP. This includes the roles of the **Host**, **Client**, and **Server**, and how they communicate. This serves as the theoretical blueprint for any MCP-based system.

2.  **Practical Application (Hotel Finder):** We then scale up this architecture with a concrete example—an intelligent hotel finder built with Streamlit and the `agno` agent framework. This application demonstrates:
    *   A **Streamlit** app acting as the **MCP Host**.
    *   A **Perplexity-powered AI agent** acting as the **MCP Client**.
    *   An **MCP Server** that connects to live Airbnb data, providing a real-world tool for the agent.

This structure allows you to first understand the core concepts and then see them in action, providing a better perspective on how to build and scale your own agentic AI applications.

## Features

-   **MCP Host:** A Streamlit application serves as the user interface and orchestrator for the agent.
-   **MCP Client:** Managed by the `agno` library, it handles the discovery of and communication with MCP servers.
-   **MCP Server:** The project uses the `@openbnb/mcp-server-airbnb` Node.js package, which acts as an MCP server providing real-time access to Airbnb's data.
-   **Standardized Communication:** Leverages JSON-RPC 2.0 for reliable data exchange between the agent and the Airbnb tool.
-   **Swappable AI Models:** The architecture allows for easy replacement of the LLM provider (e.g., from Perplexity to OpenAI, Anthropic, or others).
-   **Modularity:** The system can be easily extended by adding new MCP servers for different tools or services (e.g., weather, flight booking, local databases).

## Architecture Diagram

This project follows a classic MCP client-server model:

1.  **User Interaction:** The user enters a query into the Streamlit web interface (the **MCP Host**).
2.  **LLM Processing:** The Host forwards the prompt to the Large Language Model (in this case, a Perplexity model) via the `agno` agent.
3.  **Tool Discovery:** The agent determines it needs to search for hotels. The **MCP Client** within the agent discovers the available Airbnb MCP server.
4.  **Action Request:** The Client sends a formatted JSON-RPC request to the `@openbnb/mcp-server-airbnb` server with search parameters like location, dates, and guests.
5.  **Execution:** The MCP server executes the search against the live service and returns the hotel data.
6.  **Response Generation:** The Client relays the structured data back to the LLM, which then formats it into a user-friendly response according to the provided template and displays it in the Streamlit app.

## Technologies Used

-   **Backend:** Python
-   **Frontend:** Streamlit
-   **LLM Provider:** Perplexity (easily swappable)
-   **Agent Framework:** `agno`
-   **Tool Protocol:** Model Context Protocol (MCP)
-   **Key Libraries:** `streamlit`, `agno`, `mcp`, `python-dotenv`

## Getting Started

### Prerequisites

-   Python 3.9+
-   [Poetry](https://python-poetry.org/docs/#installation) installed on your system.
-   [Node.js and npm](https://nodejs.org/en/download/) (for running the Airbnb MCP server).
-   A Perplexity API key.

### Installation

1.  **Clone the repository:**
    ```
    git clone https://github.com/nileshgode/MCP_Architecture.git
    cd MCP_Architecture
    ```

2.  **Install Python dependencies using Poetry:**
    This command will read the `pyproject.toml` file, create a virtual environment, and install all required libraries.
    ```
    poetry install
    ```

3.  **Set up environment variables:**
    Create a `.env` file in the root directory and add your Perplexity API key:
    ```
    PERPLEXITY_API_KEY="your_api_key_here"
    ```

### Running the Application

The application consists of two main parts: the MCP server (the tool) and the Streamlit app (the agent host). You will need to run them simultaneously.

1.  **Activate the virtual environment:**
    ```
    poetry shell
    ```

2.  **Start the MCP Host application:**
    In your terminal, run the Streamlit app using Poetry's script command (defined in `pyproject.toml`):
    ```
    poetry run start
    ```
    *(This is a shortcut for `streamlit run app.py`)*

3.  Open your browser and navigate to `http://localhost:8501`.

The Python script is configured to automatically start the `@openbnb/mcp-server-airbnb` server using `npx` when a search is executed, so you do not need to start it in a separate terminal.

## Usage

Once the application is running, you can interact with the agent through the web interface:

1.  Enter your Perplexity API key in the sidebar.
2.  Use the "Quick Search" or "Advanced Search" tabs to define your hotel preferences.
3.  Click "Execute Hotel Search" to have the AI agent find and present the results.

Try prompts like:
-   "Find budget-friendly hotels in Kolkata, India."
-   Use the advanced filters to find a 5-star hotel with a pool and parking for 2 adults and 1 child.

## How to Contribute

Contributions are welcome! If you would like to contribute, please follow these steps:

1.  Fork the repository.
2.  Create a new branch (`git checkout -b feature/YourFeature`).
3.  Make your changes.
4.  Commit your changes (`git commit -m 'Add some feature'`).
5.  Push to the branch (`git push origin feature/YourFeature`).
6.  Open a Pull Request.

## License

This project is licensed under the MIT License.
